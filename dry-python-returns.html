<section id="introductions" class="slide level1">
<h1>Introductions</h1>
<ul>
<li><p>Jesse Moore</p></li>
<li><p>Master of Science in Software Engineering</p></li>
<li><p>Bachelor of Science in Computer Science</p></li>
<li><p>Roughly nine years of professional experience at ADTRAN.</p></li>
<li><p>Develop with Debian and Python by day.</p></li>
<li><p>Dabble with NixOS and Haskell by night.</p></li>
</ul>
</section>
<section id="hsv.py-plug" class="slide level1">
<h1>HSV.py Plug</h1>
<p>Thanks to HSV.py for allowing me to present on this topic.</p>
<p>slides are available on my github:</p>
<p>https://github.com/jesseDMoore1994/dry-python-returns/tree/hsv.py</p>
<p>(Or just ask me and I can forward it to you.)</p>
</section>
<section id="huntfunc-plug" class="slide level1">
<h1>HuntFunc Plug</h1>
<p>Before getting started… Are you interested in functional programming?
Do you live in the hunsville area? If so, consider joining HuntFunc!</p>
<ul>
<li><p>Google group: https://groups.google.com/u/1/g/huntfunc</p></li>
<li><p>twitter: https://twitter.com/huntfunc</p></li>
<li><p>website: http://huntfunc.github.io/</p></li>
</ul>
</section>
<section id="lets-get-started" class="slide level1">
<h1>Let’s Get Started!</h1>
<p>The presentation today is: <em>Meaningful return types and functional
python with returns!</em></p>
<p>This presentation will serve to shortly explain:</p>
<ul>
<li><p>What is the problem <em>returns</em> is trying to solve?</p></li>
<li><p>How does <em>returns</em> contribute to solving those
problems?</p></li>
</ul>
<p>I also hope to provide useful examples along the way.</p>
</section>
<section id="the-pitch" class="slide level1">
<h1>The pitch</h1>
<p>Why should you use <em>returns</em> when developing python projects?
There are a ton of features dry-python’s return boasts, available on the
github page.</p>
<p>I will elect to just describe what I personally find useful about it.
In general I would say that <em>returns</em>…</p>
<ul>
<li><p>… tends to make my python code more expressive instead of
obfuscating my programmatic intent.</p></li>
<li><p>… forces me to examine and be concerned with the edge cases of my
software by forcing safe types on me instead of muttling meaning around
the boundary of control flow.</p></li>
<li><p>… guides me to separate architectural concerns by making it
easier to write pure fuctions and providing tools to compose them in a
(relatively) uncomplicated way.</p></li>
</ul>
</section>
<section id="what-are-the-tools-returns-provides-to-facilitate-this"
class="slide level1">
<h1>What are the tools returns provides to facilitate this?</h1>
<p><em>returns</em> provides two primary categories of
<strong>things</strong>.</p>
<p>There are <strong>containers</strong> and then there are
<strong>compositional helpers</strong>.</p>
<ul>
<li><p><strong>containers</strong> are special boxes that are use to
wrap values in a computational context. (In Haskell, these types would
be considered instances of Monad.)</p></li>
<li><p><strong>compositional helpers</strong> are tools that can be used
to make first class function use with our containers more pythonic and
remove some of the manual drudgery of working directly with the
containers.</p></li>
</ul>
</section>
<section id="simple-example-to-start" class="slide level1">
<h1>Simple example to start!</h1>
<p>Lets take a look at our first container. The <em>Maybe</em>
container.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> sqrt</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.maybe <span class="im">import</span> maybe</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="at">@maybe</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_root(square: <span class="bu">float</span>) <span class="op">-&gt;</span> Optional[<span class="bu">float</span>]:</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> square <span class="op">&gt;=</span> <span class="dv">0</span>:</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> sqrt(square)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_root(<span class="dv">4</span>))</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_root(<span class="op">-</span><span class="dv">4</span>))</span></code></pre></div>
<p>What is happening here? We are actually using the <em>maybe</em>
decorator to wrap the return of our function in the <em>Maybe</em>
container.</p>
</section>
<section id="maybe-container" class="slide level1">
<h1>Maybe container</h1>
<p>We could also elect to do this directly, rather than using the
decorator, like so.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> sqrt</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.maybe <span class="im">import</span> Maybe, Some, Nothing</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_root(square: <span class="bu">float</span>) <span class="op">-&gt;</span> Maybe[<span class="bu">float</span>]:</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> square <span class="op">&gt;=</span> <span class="dv">0</span>:</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> Some(sqrt(square))</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Nothing</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_root(<span class="dv">4</span>))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_root(<span class="op">-</span><span class="dv">4</span>))</span></code></pre></div>
<p>Why would we want to do this? For one simple reason, it gets rid of
the <em>None</em> value. Beyond being the “billion dollar mistake” which
nullables have grown to be described, handling them introduces a
complexity overhead that destroys readability.</p>
</section>
<section id="maybe-container-1" class="slide level1">
<h1>Maybe container</h1>
<p>We can use these containers to chain multiple operations together and
eliminate the <em>None</em> checks!</p>
<p>With returns! :)</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> sqrt</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.maybe <span class="im">import</span> Maybe, maybe</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="at">@maybe</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_root(square: <span class="bu">float</span>) <span class="op">-&gt;</span> Optional[<span class="bu">float</span>]:</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> square <span class="op">&gt;=</span> <span class="dv">0</span>:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> sqrt(square)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">@maybe</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> divide(numerator: <span class="bu">float</span>, denominator: <span class="bu">float</span>) <span class="op">-&gt;</span> Optional[<span class="bu">float</span>]: </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> denominator <span class="op">!=</span> <span class="dv">0</span>:</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (numerator<span class="op">/</span>denominator)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divide(<span class="dv">4</span>, <span class="dv">2</span>).bind(get_root))</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divide(<span class="op">-</span><span class="dv">4</span>, <span class="dv">2</span>).bind(get_root))</span></code></pre></div>
</section>
<section id="maybe-container-2" class="slide level1">
<h1>Maybe container</h1>
<p>without returns… :(</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> sqrt</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_root(square: Optional[<span class="bu">float</span>]) <span class="op">-&gt;</span> Optional[<span class="bu">float</span>]:</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> square <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> square <span class="op">&gt;=</span> <span class="dv">0</span>:</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> sqrt(square)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> divide(numerator: <span class="bu">float</span>, denominator: <span class="bu">float</span>) <span class="op">-&gt;</span> Optional[<span class="bu">float</span>]: </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> denominator <span class="op">!=</span> <span class="dv">0</span>:</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (numerator<span class="op">/</span>denominator)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_root(divide(<span class="dv">4</span>, <span class="dv">2</span>)))</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_root(divide(<span class="op">-</span><span class="dv">4</span>, <span class="dv">2</span>)))</span></code></pre></div>
<p>These None checks would only spiral further and every function
written that would receive a <em>None</em> would have to validate it.
Using returns, we can write code without fear of the <em>None</em> case
and trust the bindings.</p>
</section>
<section id="pipelines-pipes-and-flows" class="slide level1">
<h1>Pipelines (pipes and flows)</h1>
<p>Lets take a quick interlude to talk about our first
<strong>compositional helper</strong>.</p>
<p>It is quite common in a functional style to want to compose functions
together. <strong>Pipes</strong> and <strong>flows</strong> can help to
define a data pipeline with your functions. The only distinction being
that <strong>flows</strong> are used when you have something to act on
immediately, and <strong>pipes</strong> can be used to hold a
composition until it can be used later.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> py.maybe <span class="im">import</span> get_root, divide</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pointfree <span class="im">import</span> bind</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pipeline <span class="im">import</span> flow, pipe</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> flow(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">4</span>, <span class="dv">2</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> args: divide(<span class="op">*</span>args), <span class="co">#Here I am widening args for python</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    bind(get_root),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;flow: </span><span class="sc">{</span>f<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>divide_then_root <span class="op">=</span> pipe(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> args: divide(<span class="op">*</span>args),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    bind(get_root),</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;pipe: </span><span class="sc">{</span>divide_then_root((<span class="dv">4</span>,<span class="dv">2</span>),)<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
</section>
<section id="result-container" class="slide level1">
<h1>Result Container</h1>
<p>Our next container is the result container, which can be used to
convey either success or failure.</p>
<p>Lets say your application maintains a list of users as dictionaries,
and you want to perform operations on that list.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pipeline <span class="im">import</span> flow</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Callable, Iterable</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>my_users <span class="op">=</span> [</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    {<span class="st">&quot;_id&quot;</span>: <span class="st">&quot;1&quot;</span>, <span class="st">&quot;first&quot;</span>: <span class="st">&quot;Jesse&quot;</span>, <span class="st">&quot;last&quot;</span>: <span class="st">&quot;Moore&quot;</span>},</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    {<span class="st">&quot;_id&quot;</span>: <span class="st">&quot;2&quot;</span>, <span class="st">&quot;first&quot;</span>: <span class="st">&quot;John&quot;</span>, <span class="st">&quot;last&quot;</span>: <span class="st">&quot;Doe&quot;</span>},</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    {<span class="st">&quot;_id&quot;</span>: <span class="st">&quot;3&quot;</span>, <span class="st">&quot;first&quot;</span>: <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;last&quot;</span>: <span class="st">&quot;Doe&quot;</span>},</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">filter</span>(users: Iterable[<span class="bu">dict</span>], key: <span class="bu">str</span>, value: <span class="bu">str</span>) <span class="op">-&gt;</span> Iterable[<span class="bu">dict</span>]:</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [user <span class="cf">for</span> user <span class="kw">in</span> users <span class="cf">if</span> user[key] <span class="op">==</span> value]</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get(users: Iterable[<span class="bu">dict</span>], key: <span class="bu">str</span>, value: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">dict</span>:</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> user <span class="kw">in</span> users:</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> user[key] <span class="op">==</span> value:</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> user</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">raise</span> <span class="pp">RuntimeError</span>(<span class="ss">f&quot;Cannot find a user with </span><span class="sc">{</span>key<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">!&quot;</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> filter_then_get(users: Iterable[<span class="bu">dict</span>], firstname: <span class="bu">str</span>, lastname: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">dict</span>:</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> flow(</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>        (users, <span class="st">&quot;last&quot;</span>, lastname),</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="kw">lambda</span> x: <span class="bu">filter</span>(<span class="op">*</span>x),</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>        <span class="kw">lambda</span> y: get(y, <span class="st">&quot;first&quot;</span>, firstname),</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(filter_then_get(my_users, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Doe&quot;</span>))</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(filter_then_get(my_users, <span class="st">&quot;Midori&quot;</span>, <span class="st">&quot;Roman&quot;</span>))</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">RuntimeError</span> <span class="im">as</span> ex:</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;doh! </span><span class="sc">{</span>ex<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
</section>
<section id="result-container-1" class="slide level1">
<h1>Result container</h1>
<p>In some scenarios, it may not be a bad thing that a user cannot be
found, but it means that in those scenarios we need to write try except
logic to catch the error. Instead, we could use <em>Result</em> to
convey the failure explicitly without exceptions.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pipeline <span class="im">import</span> flow</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Callable, Iterable</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.result <span class="im">import</span> Result, Success, Failure</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>my_users <span class="op">=</span> [</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    {<span class="st">&quot;_id&quot;</span>: <span class="st">&quot;1&quot;</span>, <span class="st">&quot;first&quot;</span>: <span class="st">&quot;Jesse&quot;</span>, <span class="st">&quot;last&quot;</span>: <span class="st">&quot;Moore&quot;</span>},</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    {<span class="st">&quot;_id&quot;</span>: <span class="st">&quot;2&quot;</span>, <span class="st">&quot;first&quot;</span>: <span class="st">&quot;John&quot;</span>, <span class="st">&quot;last&quot;</span>: <span class="st">&quot;Doe&quot;</span>},</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    {<span class="st">&quot;_id&quot;</span>: <span class="st">&quot;3&quot;</span>, <span class="st">&quot;first&quot;</span>: <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;last&quot;</span>: <span class="st">&quot;Doe&quot;</span>},</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">filter</span>(users: Iterable[<span class="bu">dict</span>], key: <span class="bu">str</span>, value: <span class="bu">str</span>) <span class="op">-&gt;</span> Iterable[<span class="bu">dict</span>]:</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> []</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> user <span class="kw">in</span> users:</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> user[key] <span class="op">==</span> value:</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>            res.append(user)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get(users: Iterable[<span class="bu">dict</span>], key: <span class="bu">str</span>, value: <span class="bu">str</span>) <span class="op">-&gt;</span> Result[<span class="bu">dict</span>, <span class="bu">str</span>]:</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> user <span class="kw">in</span> users:</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> user[key] <span class="op">==</span> value:</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> Success(user)</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Failure(<span class="ss">f&quot;Cannot find a user with </span><span class="sc">{</span>key<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">!&quot;</span>)</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> filter_then_get(users: Iterable[<span class="bu">dict</span>], firstname: <span class="bu">str</span>, lastname: <span class="bu">str</span>) <span class="op">-&gt;</span> Result[<span class="bu">dict</span>, <span class="bu">str</span>]:</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> flow(</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>        (users, <span class="st">&quot;last&quot;</span>, lastname),</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>        <span class="kw">lambda</span> x: <span class="bu">filter</span>(<span class="op">*</span>x),</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>        <span class="kw">lambda</span> y: get(y, <span class="st">&quot;first&quot;</span>, firstname),</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="co"># works fine every time!</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(filter_then_get(my_users, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Doe&quot;</span>))</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(filter_then_get(my_users, <span class="st">&quot;Midori&quot;</span>, <span class="st">&quot;Roman&quot;</span>))</span></code></pre></div>
<p>You can also use the <strong><span class="citation"
data-cites="safe__">@safe__</span> decorator from the result module to
convert a function that throws exceptions to one that returns failures
with the exception that caused it. </strong>@attempt__ will do the same
except return the input that caused the exception rather than the
exception itself.</p>
</section>
<section id="result-container-2" class="slide level1">
<h1>Result container</h1>
<p>Just like with the <em>Maybe</em> container, the <em>Result</em>
container can be wrapped around operations using the bind operator.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Iterable</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.result <span class="im">import</span> Result, Success, Failure, safe</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>my_users <span class="op">=</span> [</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    {<span class="st">&quot;_id&quot;</span>: <span class="st">&quot;1&quot;</span>, <span class="st">&quot;first&quot;</span>: <span class="st">&quot;Jesse&quot;</span>, <span class="st">&quot;last&quot;</span>: <span class="st">&quot;Moore&quot;</span>},</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    {<span class="st">&quot;_id&quot;</span>: <span class="st">&quot;2&quot;</span>, <span class="st">&quot;first&quot;</span>: <span class="st">&quot;John&quot;</span>, <span class="st">&quot;last&quot;</span>: <span class="st">&quot;Doe&quot;</span>},</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    {<span class="st">&quot;_id&quot;</span>: <span class="st">&quot;3&quot;</span>, <span class="st">&quot;first&quot;</span>: <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;last&quot;</span>: <span class="st">&quot;Doe&quot;</span>},</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="at">@safe</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get(users: Iterable[<span class="bu">dict</span>], key: <span class="bu">str</span>, value: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">dict</span>:</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> user <span class="kw">in</span> users:</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> user[key] <span class="op">==</span> value:</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> user</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">raise</span> <span class="pp">RuntimeError</span>(<span class="ss">f&quot;Cannot find a user with </span><span class="sc">{</span>key<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">!&quot;</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Can be used to provide context of the failure safely</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get(my_users, <span class="st">&quot;_id&quot;</span>, <span class="st">&quot;1&quot;</span>).bind(safe(<span class="kw">lambda</span> x: x[<span class="st">&quot;first&quot;</span>])))</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get(my_users, <span class="st">&quot;_id&quot;</span>, <span class="st">&quot;4&quot;</span>).bind(safe(<span class="kw">lambda</span> x: x[<span class="st">&quot;first&quot;</span>])))</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get(my_users, <span class="st">&quot;_id&quot;</span>, <span class="st">&quot;1&quot;</span>).bind(safe(<span class="kw">lambda</span> x: x[<span class="st">&quot;middle&quot;</span>])))</span></code></pre></div>
</section>
<section id="converters" class="slide level1">
<h1>Converters</h1>
<p>Now that we have both <em>Maybe</em> and <em>Result</em>, it might be
useful from time to time, to be able to go back and forth between the
two types, you can do that using <strong>converters</strong>
<em>maybe_to_result</em> and <em>result_to_maybe</em>.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.converters <span class="im">import</span> maybe_to_result, result_to_maybe</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.maybe <span class="im">import</span> Some, Nothing</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.result <span class="im">import</span> Success, Failure</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result_to_maybe(Success(<span class="dv">1</span>)))</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result_to_maybe(Failure(<span class="pp">Exception</span>)))</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result_to_maybe(Success(<span class="va">None</span>)))  <span class="co"># The docs say `Success(None)` this is supposed to be `Nothing`...</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(maybe_to_result(Some(<span class="dv">1</span>)))        <span class="co"># https://returns.readthedocs.io/en/latest/pages/converters.html#maybe-and-result</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(maybe_to_result(Nothing))</span></code></pre></div>
<p>You can also use <em>flatten</em> to remove redundant layers of
container.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.converters <span class="im">import</span> flatten</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.maybe <span class="im">import</span> Some, Nothing</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.result <span class="im">import</span> Success, Failure</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(flatten(Success(Success(Failure(<span class="pp">Exception</span>)))))</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(flatten(Some(Some(Nothing))))</span></code></pre></div>
</section>
<section id="io-container" class="slide level1">
<h1>IO Container</h1>
<p>The next container is the <em>IO</em> container, we can use it to
make our IO explicit.</p>
<p>Why do I want explicit IO? Consider we want to add the ability to
read a life story from a file for a user.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> py.result <span class="im">import</span> my_users, get, Result, Success, Failure</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pipeline <span class="im">import</span> flow</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pointfree <span class="im">import</span> bind</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Iterable</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_life_story(user: <span class="bu">dict</span>) <span class="op">-&gt;</span> Result[<span class="bu">str</span>, <span class="bu">str</span>]:</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    life_story <span class="op">=</span> <span class="ss">f&quot;life_stories/</span><span class="sc">{</span>user[<span class="st">&#39;first&#39;</span>]<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>user[<span class="st">&#39;last&#39;</span>]<span class="sc">}</span><span class="ss">&quot;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(life_story, encoding<span class="op">=</span><span class="st">&quot;utf-8&quot;</span>) <span class="im">as</span> f:</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> Success(f.read())</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _id <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">5</span>):</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>            flow(</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                (my_users, <span class="st">&quot;_id&quot;</span>, <span class="ss">f&quot;</span><span class="sc">{</span>_id<span class="sc">}</span><span class="ss">&quot;</span>),</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>                <span class="kw">lambda</span> x: get(<span class="op">*</span>x),</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>                bind(read_life_story)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> ex:</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;doh! </span><span class="sc">{</span>ex<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<p>Uh oh, our code failed because we forgot to give Jane a life story!
Worse yet, it blends into the code make hides the true complexity of the
function which relies on the state of the filesystem!</p>
</section>
<section id="io-container-1" class="slide level1">
<h1>IO Container</h1>
<p>Instead, we can use the <em>IO</em> container to highlight the IO
side effects inherent to the function.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> py.result <span class="im">import</span> my_users, get</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pipeline <span class="im">import</span> flow</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pointfree <span class="im">import</span> bind</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.io <span class="im">import</span> IOResultE, IOSuccess, IOFailure</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Iterable</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_life_story(user: <span class="bu">dict</span>) <span class="op">-&gt;</span> IOResultE[<span class="bu">str</span>]:</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    life_story <span class="op">=</span> <span class="ss">f&quot;life_stories/</span><span class="sc">{</span>user[<span class="st">&#39;first&#39;</span>]<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>user[<span class="st">&#39;last&#39;</span>]<span class="sc">}</span><span class="ss">&quot;</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(life_story, encoding<span class="op">=</span><span class="st">&quot;utf-8&quot;</span>) <span class="im">as</span> f:</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> IOSuccess(f.read())</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> ex:</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> IOFailure(ex)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _id <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">5</span>):</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        flow(</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>            (my_users, <span class="st">&quot;_id&quot;</span>, <span class="ss">f&quot;</span><span class="sc">{</span>_id<span class="sc">}</span><span class="ss">&quot;</span>),</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>            <span class="kw">lambda</span> x: get(<span class="op">*</span>x),</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>            bind(read_life_story)</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</section>
<section id="io-container-2" class="slide level1">
<h1>IO Container</h1>
<p>You could also use the <strong>impure_safe</strong> decorator to wrap
the function with IOResultE. Now we get the safety of the <em>IO</em>
container and the readability of plain python.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> py.result <span class="im">import</span> my_users, get, Result, Success, Failure</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pipeline <span class="im">import</span> flow</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pointfree <span class="im">import</span> bind</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.io <span class="im">import</span> impure_safe</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Iterable</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="at">@impure_safe</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_life_story(user: <span class="bu">dict</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    life_story <span class="op">=</span> <span class="ss">f&quot;life_stories/</span><span class="sc">{</span>user[<span class="st">&#39;first&#39;</span>]<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>user[<span class="st">&#39;last&#39;</span>]<span class="sc">}</span><span class="ss">&quot;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(life_story, encoding<span class="op">=</span><span class="st">&quot;utf-8&quot;</span>) <span class="im">as</span> f:</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> f.read()</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _id <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">5</span>):</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        flow(</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>            (my_users, <span class="st">&quot;_id&quot;</span>, <span class="ss">f&quot;</span><span class="sc">{</span>_id<span class="sc">}</span><span class="ss">&quot;</span>),</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>            <span class="kw">lambda</span> x: get(<span class="op">*</span>x),</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>            bind(read_life_story)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</section>
<section id="do-notation" class="slide level1">
<h1>Do Notation</h1>
<p>There will be some scenarios where you want to use more than one
container value. Since bind is with respect to only one container, it
becomes a slog to pythonically write operations with multiple
containers. Luckily, we can use <strong>do notation</strong> to make
this easier.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.io <span class="im">import</span> IO</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.result <span class="im">import</span> Result, Success, Failure</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>   IO.do(</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>       one <span class="op">+</span> two</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>       <span class="cf">for</span> one <span class="kw">in</span> IO(<span class="dv">1</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>       <span class="cf">for</span> two <span class="kw">in</span> IO(<span class="dv">2</span>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>   )</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>   Result.do(</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>       good <span class="op">+</span> bad</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>       <span class="cf">for</span> good <span class="kw">in</span> Success(<span class="dv">1</span>)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>       <span class="cf">for</span> bad <span class="kw">in</span> Failure(<span class="st">&quot;crash&quot;</span>)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>   )</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</section>
<section id="future-container" class="slide level1">
<h1>Future Container</h1>
<p><em>Future</em> is useful in asynchronous applications, and serves to
attempt and solve the following problems.</p>
<pre><code>1. You cannot call async function from a sync one

2. Any unexpectedly thrown exception can ruin your whole event loop

3. Ugly composition with lots of await statements</code></pre>
<p>For example, you cannot await coroutines in a synchronous
context:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test():</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> my_async_routine()</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(test())</span></code></pre></div>
<p>This function must instead be turned into an async function, then all
caller functions must be, and so on. This makes composition between
async functions and non async functions difficult. However, you can use
return inside of async definitions to get awaitable values.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> test():</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(asyncio.run(test()))</span></code></pre></div>
</section>
<section id="future-container-1" class="slide level1">
<h1>Future Container</h1>
<p>The <em>Future</em> container can then be used to compose these
functions together, while maintaining a synchronous context at top
level, only to allow a transformation to async when desired.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.future <span class="im">import</span> Future</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> first() <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> second(arg: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arg <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main() <span class="op">-&gt;</span> Future[<span class="bu">int</span>]:  <span class="co"># sync function!</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> Future(first()).bind_awaitable(second)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(first())</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(asyncio.run(first()))</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(second(first()))</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(asyncio.run(second(asyncio.run(first()))))</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(main())</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(asyncio.run(main().awaitable()))</span></code></pre></div>
</section>
<section id="point-free-methods" class="slide level1">
<h1>Point free methods</h1>
<p>There are times when using container methods are not fun. They aren’t
as easily composable when defining pipelines. I glanced over it earlier,
when I was discussing pipelines.</p>
<p><em>pointfree</em> provides access to container functions like
<code>.map</code> and <code>.bind</code> without requiring to call them
on the container directly. In other words, it converts a function like
“a -&gt; Container[b]” to “Container[a] -&gt; Container[b]”. This allows
you to take what you would previously write <code>x.f(y)</code> and
write it more like <code>f(x)(y)</code>.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> py.maybe <span class="im">import</span> get_root, divide</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pointfree <span class="im">import</span> bind</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.pipeline <span class="im">import</span> flow, pipe</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>pointfree <span class="op">=</span> flow(</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">4</span>, <span class="dv">2</span>),</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> args: divide(<span class="op">*</span>args),</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    bind(get_root),</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>pointfree<span class="op">=</span><span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>non_pointfree <span class="op">=</span> flow(</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">4</span>, <span class="dv">2</span>),</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> args: divide(<span class="op">*</span>args),</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> x: x.bind(get_root),</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>non_pointfree<span class="op">=</span><span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
</section>
<section id="requirescontext-container" class="slide level1">
<h1>RequiresContext container</h1>
<p>The <em>RequiresContext</em> container allows you to rely on context
from framework settings, environment, etc. without having to use side
effects or passing that information as a parameter.</p>
<p>For instance, have you ever needed to access a settings variable? You
can can access them directly like this, but then your implementation is
polluted with project specific details.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> py.config <span class="im">import</span> SETTINGS</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sshpass_cmd(cmd: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> (</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>       <span class="ss">f&quot;sshpass -p </span><span class="sc">{</span>SETTINGS[<span class="st">&#39;password&#39;</span>]<span class="sc">}</span><span class="ss"> &quot;</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>       <span class="ss">f&quot;ssh -p </span><span class="sc">{</span>SETTINGS[<span class="st">&#39;port&#39;</span>]<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>SETTINGS[<span class="st">&#39;username&#39;</span>]<span class="sc">}</span><span class="ss">@</span><span class="sc">{</span>SETTINGS[<span class="st">&#39;ip&#39;</span>]<span class="sc">}</span><span class="ss"> &quot;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>       <span class="ss">f&quot;</span><span class="sc">{</span>cmd<span class="sc">}</span><span class="ss">&quot;</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>   )</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_hostname() <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> sshpass_cmd(<span class="st">&quot;hostname&quot;</span>)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_hostname())</span></code></pre></div>
</section>
<section id="requirescontext-container-1" class="slide level1">
<h1>RequiresContext container</h1>
<p>Without using returns, you could make the fuction pure again, but you
would have to add settings as an argument up an and down the entire call
stack.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> py.config <span class="im">import</span> SETTINGS</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sshpass_cmd(settings: <span class="bu">dict</span>, cmd: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> (</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>       <span class="ss">f&quot;sshpass -p </span><span class="sc">{</span>settings[<span class="st">&#39;password&#39;</span>]<span class="sc">}</span><span class="ss"> &quot;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>       <span class="ss">f&quot;ssh -p </span><span class="sc">{</span>settings[<span class="st">&#39;port&#39;</span>]<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>settings[<span class="st">&#39;username&#39;</span>]<span class="sc">}</span><span class="ss">@</span><span class="sc">{</span>settings[<span class="st">&#39;ip&#39;</span>]<span class="sc">}</span><span class="ss"> &quot;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>       <span class="ss">f&quot;</span><span class="sc">{</span>cmd<span class="sc">}</span><span class="ss">&quot;</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>   )</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_hostname(settings: <span class="bu">dict</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> sshpass_cmd(settings, <span class="st">&quot;hostname&quot;</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_hostname(SETTINGS))</span></code></pre></div>
</section>
<section id="requirescontext-container-2" class="slide level1">
<h1>RequiresContext container</h1>
<p>With returns, you can write your functions in such a way that the
dependency can be injected allowing us to more accurately acheive the
single responsibility principle by programming against an interface
rather than the dependency directly.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> py.config <span class="im">import</span> SETTINGS</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing_extensions <span class="im">import</span> Protocol</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> returns.context <span class="im">import</span> RequiresContext</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> _Settings(Protocol):</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>   ip: <span class="bu">str</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>   port: <span class="bu">int</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>   user: <span class="bu">str</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>   passwd: <span class="bu">str</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sshpass_cmd(cmd: <span class="bu">str</span>) <span class="op">-&gt;</span> RequiresContext[<span class="bu">str</span>, _Settings]:</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>   <span class="kw">def</span> internal_sshpass_cmd(settings):</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>       <span class="cf">return</span> (</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>           <span class="ss">f&quot;sshpass -p </span><span class="sc">{</span>settings[<span class="st">&#39;password&#39;</span>]<span class="sc">}</span><span class="ss"> &quot;</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>           <span class="ss">f&quot;ssh -p </span><span class="sc">{</span>settings[<span class="st">&#39;port&#39;</span>]<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>settings[<span class="st">&#39;username&#39;</span>]<span class="sc">}</span><span class="ss">@</span><span class="sc">{</span>settings[<span class="st">&#39;ip&#39;</span>]<span class="sc">}</span><span class="ss"> &quot;</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>           <span class="ss">f&quot;</span><span class="sc">{</span>cmd<span class="sc">}</span><span class="ss">&quot;</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> RequiresContext(internal_sshpass_cmd)</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_hostname() <span class="op">-&gt;</span> RequiresContext[<span class="bu">str</span>, _Settings]:</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> sshpass_cmd(<span class="st">&quot;hostname&quot;</span>)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(get_hostname()(SETTINGS))</span></code></pre></div>
</section>
<section id="closing-remarks" class="slide level1">
<h1>Closing Remarks</h1>
<p>I think by now you get the point, I think I got the high level
points. I didn’t get everything though. Here are some points I didn’t
want to squeeze in.</p>
<ul>
<li>You can create your own containers.</li>
<li>mypy/pytest integrations.</li>
<li>hypothesis integrations.</li>
<li>Foldables.</li>
<li>Currying. (partial is preferred by authors unless using
integrations)</li>
<li>There is a whole library of helper functions, many I didn’t
cover.</li>
<li>works great with match expressions!</li>
</ul>
<p>Many thanks to the dry-python team for returns, if they ever see
this.</p>
</section>
<section id="questions" class="slide level1">
<h1>Questions?</h1>
</section>
